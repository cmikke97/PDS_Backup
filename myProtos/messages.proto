syntax = "proto3";

package messages;

//client messages
message ClientMessage{
  int32 version = 1;  //version of the protocol
  Type type = 2; //type of message

  string path = 3;           //for STOR, DELE, MKD, RMD
  uint64 fileSize = 4;       //for STOR
  string lastWriteTime = 5;  //for STOR
  bytes hash = 6;            //for STOR, DELE
  string username = 7;       //for USER
  string password = 8;       //for PASS

  enum Type{
    NOOP = 0;
    STOR = 1;
    DELE = 2;
    MKD = 3;
    RMD = 4;
    AUTH = 5;
    QUIT = 6;
  }
}

//server messages
message ServerMessage{
  int32 version = 1;  //version of the protocol
  Type type = 2; //type of message

  int32 code = 3;   //for OK and ERR
  int32 newVersion = 4; //for VER

  enum Type{
    NOOP = 0;
    OK = 1;
    SEND = 2;
    ERR = 3;
    VER = 4;
  }
}